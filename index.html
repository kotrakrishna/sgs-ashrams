<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Datta temple locations</title>
    <style>
        html, body, #map-canvas {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <script>


        // Scope all the functions under datta temples
        var dt = {
                    // Api key for google maps api.
                    apiKey: 'AIzaSyARyBk64-eFDPKjFl1XbaLEsw7aCyWQcb4',


                    //  Data for the markers consisting of a name, a LatLng and a zIndex for
                    //  the order in which these markers should display on top of each
                    //  other.
                    locations: [
                        {

                            title: 'Kalagni Samana Datta',
                            lat: 12.283467,
                            lng: 76.659047,
                            zIndex: 1,
                            info: '<div id="content">' +
                                    '<h3>Kalagni Samana Datta</h3>' +
                                    '<div id="bodyContent">' +
                                    '<p>' +
                                    '<div>Avadhoota Datta Peetham</div>' +
                                    '<div>Sri Ganapati Sachchidananda Ashrama,</div>' +
                                    '<div>Datta Nagar, Mysore - 570 025. INDIA.</div>' +
                                    '<div>Tel: +91 (0821) 2486 486 Fax: +91 (0821) 2487 487</div>' +
                                    '<div>email : mail@dattapeetham.com</div>' +
                                    '<p>' +
                                    '<div>Website : <a href="http://www.dattapeetham.org">www.dattapeetham.org</a></div>' +
                                    '<div>Facebook : <a href="https://www.facebook.com/dattapeetham">www.facebook.com/dattapeetham</a></div>' +
                                    '</p>' +
                                    '</div>' +
                                    '</p>' +
                                    '</div>'
                        }
                    ],

                    initialize: function () {
                        var mapOptions = {
                            zoom: 8,
                            center: new google.maps.LatLng(12.283479, 76.659035)
                        };

                        var map = new google.maps.Map(document.getElementById('map-canvas'),
                                mapOptions);

                        this.setMarkers(map, dt.locations);
                    },

                    loadScript: function () {
                        var script = document.createElement('script');
                        script.type = 'text/javascript';
                        script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp' +
                                '&callback=dt.initialize';
//                        '&key=' + dt.apiKey;
                        document.body.appendChild(script);
                    },

                    setMarkers: function (map, locations) {
                        // Add markers to the map

                        // Marker sizes are expressed as a Size of X,Y
                        // where the origin of the image (0,0) is located
                        // in the top left of the image.

                        // Origins, anchor positions and coordinates of the marker
                        // increase in the X direction to the right and in
                        // the Y direction down.
                        var image = {
                            url: 'assets/images/temple.png',
                            // This marker is 32 pixels wide by 37 pixels tall.
                            size: new google.maps.Size(32, 36),
                            // The origin for this image is 0,0.
                            origin: new google.maps.Point(0, 0),
                            // The anchor for this image is the indicator below the image
                            anchor: new google.maps.Point(14.5, 34)
                        };
                        // Shapes define the clickable region of the icon.
                        // The type defines an HTML &lt;area&gt; element 'poly' which
                        // traces out a polygon as a series of X,Y points. The final
                        // coordinate closes the poly by connecting to the first
                        // coordinate.
                        var shape = {
                            coords: [0, 0, 0, 37, 37, 37, 37 , 0],
                            type: 'poly'
                        };
                        for (var i = 0; i < locations.length; i++) {
                            var location = locations[i];
                            var myLatLng = new google.maps.LatLng(location.lat, location.lng);
                            var marker = new google.maps.Marker({
                                position: myLatLng,
                                map: map,
                                icon: image,
                                shape: shape,
                                title: location.title,
                                zIndex: location.zIndex
                            });

                            var infowindow = new google.maps.InfoWindow({
                                content: location.info,
                                maxWidth: 600
                            });

                            google.maps.event.addListener(marker, 'click', function () {
                                infowindow.open(map, marker);
                            });
                        }
                    }
                }
                ;

        window.onload = dt.loadScript;

    </script>
</head>
<body>
<div id="map-canvas"></div>
</body>
</html>